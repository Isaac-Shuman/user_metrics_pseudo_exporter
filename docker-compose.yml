services:
  # prometheus:
  #   image: prom/prometheus:latest
  #   container_name: prometheus
  #   # ports:
  #   # - '9091:9091'
  #   command:
  #   - --config.file=/etc/prometheus/prometheus.yml
  #   - --storage.tsdb.path=/prometheus
  #   - '--web.listen-address=:9091'

  #   volumes:
  #   - /home/shumani/stuffIsaacAdded/user_metrics_pseudo_exporter/prometheus.yml:/etc/prometheus/prometheus.yml:ro
  #   - prometheus-storage:/prometheus
  #   network_mode: "host"

  grafana:
    image: grafana/grafana-enterprise
    container_name: grafana
    restart: unless-stopped
    ports:
    - '3000:3000'
    volumes:
    - grafana-storage:/var/lib/grafana
    #- /home/shumani/stuffIsaacAdded/user_metrics_pseudo_exporter/grafana/datasources:/etc/grafana/provisioning/datasources
    environment:
    - GF_SECURITY_ADMIN_USER=admin 
    - GF_SECURITY_ADMIN_PASSWORD=admin
    - GF_FEATURE_TOGGLES_ENABLE=alertingSimplifiedRouting
    - GF_USERS_ALLOW_SIGN_UP=true
    - GF_SECURITY_SKIP_TLS_VERIFY=true
    - GF_SMTP_SKIP_VERIFY=true
    network_mode: "host"
    
volumes:
  grafana-storage: {} #This is stored at a location managed by docker
  prometheus-storage: {}
